defmodule Script do
  def run() do
    input = [
      113_348,
      85199,
      56077,
      108_338,
      88842,
      86765,
      127_040,
      88557,
      87886,
      110_849,
      95682,
      131_611,
      79658,
      139_439,
      62467,
      82333,
      79414,
      116_672,
      118_256,
      127_660,
      59774,
      67990,
      81653,
      143_436,
      101_701,
      90571,
      131_983,
      70494,
      86232,
      137_759,
      87992,
      107_601,
      141_275,
      100_261,
      133_153,
      136_706,
      84363,
      114_771,
      115_167,
      64509,
      97324,
      70627,
      93215,
      60459,
      145_358,
      102_741,
      85623,
      145_687,
      106_837,
      146_764,
      91837,
      80190,
      114_857,
      133_985,
      55423,
      60612,
      63556,
      139_326,
      73907,
      71478,
      95854,
      87886,
      91624,
      85675,
      141_381,
      122_392,
      73756,
      131_710,
      99053,
      135_684,
      114_005,
      95885,
      75545,
      55703,
      80835,
      106_478,
      74307,
      113_562,
      134_192,
      117_605,
      138_161,
      132_905,
      117_676,
      125_103,
      147_899,
      107_373,
      142_169,
      72084,
      68682,
      115_345,
      63130,
      143_231,
      72135,
      91780,
      122_640,
      74195,
      84365,
      97015,
      81773,
      74146
    ]

    input
    |> Enum.map(fn mass -> calculate_fuel(mass) end)
    |> Enum.sum()
  end

  defp calculate_fuel(mass) when mass > 0 do
    (Integer.floor_div(mass, 3) - 2)
    |> case do
      x when x <= 0 ->
        0

      x ->
        x + calculate_fuel(x)
    end
  end
end

IO.puts(Script.run())
